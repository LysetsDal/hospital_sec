syntax = "proto3";
package hospital;
option go_package = "github.com/LysetsDal/hospital_sec/proto";

service Hospital {
    rpc SendToHospital(HospitalRequest) returns (HospitalResponse) {}
    rpc SendListToHospital(HospitalListReq) returns (HospitalListRes) {}
}

service Peer {
    rpc SendToPeer(ClientMessage) returns (ClientMessage) {}
    rpc Ping(PeerPing) returns (PingEcho) {}
}

message HospitalRequest {
    string sourceIP = 1;
    string payload = 2;
    optional int32 value = 3;
}

message HospitalResponse {
    string sourceIP = 1;
    string payload = 2;
}

message ClientMessage {
    string sourceIP = 1;
    string payload = 2;
    optional int32 value = 3;
}

message HospitalListReq {
    string sourceIP = 1;
    repeated string s_list = 2;
}

message HospitalListRes {
    string sourceIP = 1;
    repeated string s_list = 2;
    optional string err = 3;
}

message PeerPing {
    string sourceIP = 1;
    string destinationIP = 2;
    optional string payload = 3;

}

message PingEcho {
    string sourceIP = 1;
    optional string payload = 2;

}